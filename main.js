(()=>{"use strict";function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameTable=document.querySelector(".snake-game__container"),this.opts={gameTab:document.querySelector(".snake-game__container"),nextElTop:0,nextElLeft:0,prevKey:"ArrowRight",errorStep:"ArrowLeft",intervalCounter:0,time:1e3,blockTop:0,blockLeft:0,prevL:4,blockSize:30,anim:.3,score:0}}var o,r;return o=t,(r=[{key:"getMaxScore",value:function(){var e=document.querySelector(".prev-record"),t=localStorage.getItem("MaxScore")?localStorage.getItem("MaxScore"):0;e.textContent=t}},{key:"increaseScore",value:function(){this.opts.score+=this.opts.blockSize,document.querySelector(".actual-score").textContent=this.opts.score}},{key:"createGameTab",value:function(){this.opts.gameTab.style.height=15*this.opts.blockSize+"px",this.opts.gameTab.style.width=20*this.opts.blockSize+"px"}},{key:"createSnake",value:function(){var e=this;new Array(this.opts.prevL).fill().map((function(t,o){return(t=document.createElement("div")).id=o,t.className="snake-block",t.style.width=e.opts.blockSize+"px",t.style.height=e.opts.blockSize+"px",t})).forEach((function(t,o){t.style.top=0,t.style.left=o*e.opts.blockSize+"px",e.gameTable.append(t)}))}},{key:"snakeMove",value:function(){var e=this;document.addEventListener("keydown",(function(t){var o=t.key;switch(o){case"ArrowLeft":"ArrowRight"!==e.opts.prevKey&&"ArrowLeft"!==e.opts.errorStep&&(e.opts.prevKey=o);break;case"ArrowRight":"ArrowLeft"!==e.opts.prevKey&&"ArrowRight"!==e.opts.errorStep&&(e.opts.prevKey=o);break;case"ArrowUp":"ArrowDown"!==e.opts.prevKey&&"ArrowUp"!==e.opts.errorStep&&(e.opts.prevKey=o);break;case"ArrowDown":"ArrowUp"!==e.opts.prevKey&&"ArrowDown"!==e.opts.errorStep&&(e.opts.prevKey=o)}})),setInterval((function(){e.makeStep(e.opts.prevKey);var t=document.querySelectorAll(".snake-block"),o=Array.from(t).reverse(),r=document.querySelector(".dot"),s=o[0],a=r.style,l=a.left,i=a.top,n=s.style,p=n.left,c=n.top;if(l===p&&i===c){r.remove(),e.createDot(),e.increaseScore();var y=o[o.length-2],f=o[o.length-1],h=y.style,m=h.left,u=h.top,d=f.style,b=d.left,k=d.top,x=document.createElement("div");if(x.className="snake-block",x.style.width=e.opts.blockSize+"px",x.style.height=e.opts.blockSize+"px",x.id=+f.id+1+"",u===k){var v=+m.replace("px",""),S=+b.replace("px","");x.style.top=k,x.style.left=v>S?S-e.opts.blockSize+"px":S+e.opts.blockSize+"px"}else if(m===b){var g=+u.replace("px",""),w=+k.replace("px","");x.style.left=b,x.style.top=g>w?w-e.opts.blockSize+"px":w+e.opts.blockSize+"px"}e.gameTable.prepend(x)}o.forEach((function(t,o){if(0!==o){var r=t.style,a=r.top,l=r.left;a===c&&l===p&&(s.style.background="radial-gradient(black, red)",setTimeout((function(){e.gameOver(),clearInterval(1),document.body.innerHTML="<h1 class='snake-game_game-over'>GAME OVER</h1>"}),e.opts.time/4))}}))}),this.opts.time)}},{key:"makeStep",value:function(e){var t=this,o=document.querySelectorAll(".snake-block"),r=Array.from(o).reverse(),s=r[0];s.style.transition="all ".concat(this.opts.anim,"s ease"),this.opts.nextElTop=s.style.top,this.opts.nextElLeft=s.style.left;var a=+s.style.left.replace("px",""),l=+s.style.top.replace("px","");switch(e){case"ArrowLeft":a>=0?s.style.left=a-this.opts.blockSize+"px":(s.style.transition="none",s.style.left=this.gameTable.offsetWidth+this.opts.blockSize+"px"),this.opts.errorStep="ArrowRight";break;case"ArrowRight":a<=this.gameTable.offsetWidth?s.style.left=a+this.opts.blockSize+"px":(s.style.transition="none",s.style.left=-this.opts.blockSize+"px"),this.opts.errorStep="ArrowLeft";break;case"ArrowUp":l>=0?s.style.top=l-this.opts.blockSize+"px":(s.style.transition="none",s.style.top=this.gameTable.offsetHeight+this.opts.blockSize+"px"),this.opts.errorStep="ArrowDown";break;case"ArrowDown":l<=this.gameTable.offsetHeight?s.style.top=l+this.opts.blockSize+"px":(s.style.transition="none",s.style.top=-this.opts.blockSize+"px"),this.opts.errorStep="ArrowUp"}r.forEach((function(e,o){if(0!==o){e.style.transition="all ".concat(t.opts.anim,"s ease");var r=+e.style.top.replace("px",""),s=+e.style.left.replace("px","");r!==t.opts.nextElTop&&((r>t.gameTable.offsetHeight&&!e.indexed||r<0&&!e.indexed)&&(e.style.zIndex="-50",e.indexed=!0,setTimeout((function(){e.style.zIndex=""}),1e3*(t.opts.anim+.1*t.opts.anim)),setTimeout((function(){delete e.indexed}),t.opts.time+.1*t.opts.time)),e.style.top=t.opts.nextElTop,t.opts.nextElTop=r+"px"),s!==t.opts.nextElLeft&&((s>t.gameTable.offsetWidth&&!e.indexed||s<0&&!e.indexed)&&(e.style.zIndex="-50",e.indexed=!0,setTimeout((function(){e.style.zIndex=""}),1e3*(t.opts.anim+.1*t.opts.anim)),setTimeout((function(){delete e.indexed}),t.opts.time+.1*t.opts.time)),e.style.left=t.opts.nextElLeft,t.opts.nextElLeft=s+"px")}}))}},{key:"createDot",value:function(){var e=document.createElement("div");e.className="dot",e.style.width=this.opts.blockSize+"px",e.style.height=this.opts.blockSize+"px",e.style.position="absolute";var t=+this.opts.gameTab.style.height.replace("px","")*Math.random(),o=+this.opts.gameTab.style.width.replace("px","")*Math.random();e.style.top=t-t%this.opts.blockSize+"px",e.style.left=o-o%this.opts.blockSize+"px";var r=document.querySelectorAll(".snake-block"),s=Array.from(r).map((function(e){return e.style.top})),a=Array.from(r).map((function(e){return e.style.left}));s.includes(e.style.top)||a.includes(e.style.left)?this.createDot():this.gameTable.append(e)}},{key:"gameOver",value:function(){var e=document.querySelector(".prev-record"),t=+document.querySelector(".actual-score").textContent;+e.textContent<t&&localStorage.setItem("MaxScore","".concat(t))}},{key:"createGame",value:function(){this.getMaxScore(),this.createGameTab(),this.createDot(),this.createSnake(),this.snakeMove()}}])&&e(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),t}())).createGame()})();